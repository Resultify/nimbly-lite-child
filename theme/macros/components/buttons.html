<!--
  templateType: "none"
  isAvailableForNewContent: false
-->
{% import '../partials/link-attributes.html' %}
{% import '../../css/macros.css' %}
{%- macro render(module) -%}
  {%- if module.buttons|length > 0 -%}
    {% require_css %}
      <style>
        .buttons-wrp,
        .btn-block-wrp {
          justify-content: var(--module-alignment);
        }
        .buttons-wrp {
          display: flex;
          flex-direction: row;
          flex-wrap: wrap;
          align-items: center;
          width: 100%;
        }
        .btn-block-wrp {
          flex-basis: 100%;
          display: flex;
          flex-wrap: wrap;
        }
        .btn-full-width {
          width: 100%;
        }
        .btn {
          line-height: 1;
          gap: var(--root-button-icon-gap, .6ch);
        }
        .btn > svg,
        .btn > .button-image {
          width: auto;
          height: var(--root-button-icon-size, 1lh);
          fill: currentcolor;
        }
      </style>
    {% end_require_css %}
    {%- macro render_button_icon(item, position) -%}
      {%- if item.icon_position == position -%}
        {%- if item.add_icon_or_image == "image" and item.btn_image.src -%}
          <img class="button-image"
            alt=""
            src="{{item.btn_image.src}}"
            loading="lazy">
        {%- elif item.add_icon_or_image == "icon" and item.btn_icon.name -%}
          {% icon
            name="{{item.btn_icon.name}}"
            style="{{item.btn_icon.type}}"
            unicode="{{item.btn_icon.unicode}}"
            icon_set="{{item.btn_icon.icon_set}}"
            purpose="decorative",
            no_wrapper=true
          %}
        {%- endif -%}
      {%- endif -%}
    {%- endmacro -%}
    <div class="buttons-wrp">
      {%- for item in module.buttons -%}
        {%- if item.button_style is containing 'custom' -%}
          <style>
            {%- scope_css -%}
              {%- if item.button_style == "custombutton" and item.custom_style -%}
                .btn-{{item.button_style}}{{loop.index}} {
                  {%- if item.button_border_radius > 0 -%}
                    --border-radius: {{item.button_border_radius ~ 'px'}};
                  {%- endif -%}
                  {{item.button_font.css}}
                  color: var(--hover-color, var(--_color));
                  {%- if item.button_font.color -%}
                    --color: {{item.button_font.color}};
                  {%- endif -%}
                  {%- if item.button_background.css -%}
                    --bg: {{item.button_background.css}};
                  {%- endif -%}
                  {{item.button_border.css}}
                  {{item.button_spacing.css}}
                }
                .btn-{{item.button_style}}{{loop.index}}:hover {
                  {%- if item.button_hover.background.css -%}
                    --hover-bg: {{item.button_hover.background.color}};
                  {%- endif -%}
                  {%- if item.button_hover.color.css -%}
                    --hover-color: {{item.button_hover.color.css}};
                  {%- endif -%}
                  {%- if item.button_hover.border_color.css -%}
                    --hover-border: {{item.button_hover.border_color.css}};
                  {%- endif -%}
                }
              {%- elif item.button_style == "customlink" and item.custom_style -%}
                .btn-{{item.button_style}}{{loop.index}} {
                  {{item.link_font.css}}
                  color: var(--hover-color, var(--_color));
                  {%- if item.link_font.color -%}
                    --color: {{item.link_font.color}};
                  {%- endif -%}
                  {%- if item.link_underline -%}
                    text-decoration: {{item.link_underline}};
                  {%- endif -%}
                }
                .btn-{{item.button_style}}{{loop.index}}:hover {
                  {%- if item.link_hover.color.css -%}
                    --hover-color: {{item.link_hover.color.css}};
                  {%- endif -%}
                  {%- if item.link_hover.underline -%}
                    text-decoration: {{item.link_hover.underline}};
                  {%- endif -%}
                }
              {%- endif -%}
            {%- end_scope_css -%}
          </style>
        {%- endif -%}
        {%- if item.button_full_width != true and item.inline != true -%}
          <style>
            {%- scope_css -%}
              .btn-block-wrp{{loop.index}} {
                justify-content: {{horizontal_alignment_flexbox(item.button_alignment.horizontal_align)}};
              }
            {%- end_scope_css -%}
          </style>
        {%- endif -%}
        {# render CTA button #}
        {%- if item.button_style == 'cta' -%}
          {%- if item.inline ne true -%}
            <div class="btn-block-wrp">
          {%- endif -%}
          {% cta guid="{{item.cta}}" extra_classes="btn-cta" %}
          {%- if item.inline ne true -%}
            </div>
          {%- endif -%}
        {# render regular button #}
        {%- else -%}
          {%- if item.button_text -%}
            {%- if item.button_style == "customlink" -%}
              {% set btn_link_class = "btn btn-{{item.button_style}}{{loop.index}}" %}
            {%- elif item.button_style == "linkonly"-%}
              {% set btn_link_class = "btn btn-{{item.button_style}}" %}
            {%- elif item.button_style == "custombutton"-%}
              {% set btn_link_class = "btn btn-link btn-{{item.button_style}}{{loop.index}} btn-{{item.button_size}} {{'btn-full-width' if item.button_full_width}}" %}
            {%- else -%}
              {% set btn_link_class = "btn btn-link btn-{{item.button_style}} btn-{{item.button_size}} {{'btn-full-width' if item.button_full_width}}" %}
            {%- endif -%}
            {%- if item.inline ne true -%}
              <div class="btn-block-wrp btn-block-wrp{{loop.index}}">
            {%- endif -%}
            <a {{link_attributes(item.button_link)}} class="{{btn_link_class}} {{"stretched-link" if btn_stretched_link}}">
              {{render_button_icon(item, "left")}}
              <span {{'class="visually-hidden"' if item.hide_text and item.btn_image.src and item.add_icon_or_image == "image" or item.hide_text and item.btn_icon.name and item.add_icon_or_image == "icon"}}>
                {{item.button_text}}
              </span>
              {{render_button_icon(item, "right")}}
            </a>
            {%- if item.inline ne true -%}
              </div>
            {%- endif -%}
          {%- endif -%}
        {%- endif -%}
      {%- endfor -%}
    </div>
  {%- endif -%}
{%- endmacro -%}
