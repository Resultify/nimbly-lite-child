<!--
  templateType: page
  label: Case study template
  isAvailableForNewContent: true
  enableDomainStylesheets: false
  screenshotPath: ../images/template-previews/case-study.jpg
-->
{% set template_css = '../../css/templates/case-study.css' %}
{% extends "./layouts/base.html" %}

{% block body %}

  {% if html_lang == "sv" %}
    {% set website = 'Webbplats' %}
    {% set related_case_studies = 'Relaterade fallstudier' %}
  {% elif html_lang == "da" %}
    {% set website = 'Hjemmeside' %}
    {% set related_case_studies = 'Relaterede casestudier' %}
  {% else %}
    {% set website = 'Website' %}
    {% set related_case_studies = 'Related case studies' %}
  {% endif %}

  {% if dynamic_page_hubdb_row %}
    {# Create settings #}
    {% set settings = {} %}

    <div class="case-study-template">

      <div class="case-study_wrp">

        {# Header - includes company logo and title #}
        <div class="case-study__header">
          {% if dynamic_page_hubdb_row.company_logo %}
            <div class="case-study__company-logo-wrp">
              <img class="case-study__company-logo"
                src="{{dynamic_page_hubdb_row.company_logo.url}}"
                alt="{{dynamic_page_hubdb_row.company_logo.altText}}"
                width="{{dynamic_page_hubdb_row.company_logo.width}}"
                height="{{dynamic_page_hubdb_row.company_logo.height}}"
                srcset="{{ resize_image_url(dynamic_page_hubdb_row.company_logo.url, 0, 0, 1024) }}"
              >
            </div>
          {% endif %}

          {% if dynamic_page_hubdb_row.title %}
            <h1 class="case-study__title">
              {{dynamic_page_hubdb_row.title}}
            </h1>
          {% endif %}
        </div>

        <article class="case-study__article">

          {# Summary - includes Featured Image, Industry, Challenge, Results, Key Products, Company Website #}
          <div class="case-study__summary">

            {% if dynamic_page_hubdb_row.summary_featured_image %}
              <div class="case-study__summary-featured-image-wrp">
                <img class="case-study__summary-featured-image"
                  src="{{dynamic_page_hubdb_row.summary_featured_image.url}}"
                  alt="{{dynamic_page_hubdb_row.summary_featured_image.altText}}"
                  width="{{dynamic_page_hubdb_row.summary_featured_image.width}}"
                  height="{{dynamic_page_hubdb_row.summary_featured_image.height}}"
                  srcset="{{ resize_image_url(dynamic_page_hubdb_row.summary_featured_image.url, 0, 0, 1024) }}"
                >
              </div>
            {% endif %}

            <div class="case-study__summary-content">
              {# Industry #}
              {% if dynamic_page_hubdb_row.summary_industry %}
                <div class="case-study__summary-industry">

                  {% if dynamic_page_hubdb_row.summary_industry_label %}
                    <h3 class="case-study__summary-industry-label h6">
                      {{dynamic_page_hubdb_row.summary_industry_label}}
                    </h3>
                  {% endif %}
                  {{ dynamic_page_hubdb_row.summary_industry.label }}
                </div>
              {% endif %}

              {# Challenge #}
              {% if dynamic_page_hubdb_row.summary_challenge %}
                <div class="case-study__summary-challenge">
                  {% if dynamic_page_hubdb_row.summary_challenge_summary_label %}
                    <h3 class="case-study__summary-challenge-label h6">
                      {{dynamic_page_hubdb_row.summary_challenge_summary_label}}
                    </h3>
                  {% endif %}
                  {{dynamic_page_hubdb_row.summary_challenge}}
                </div>
              {% endif %}

              {# Results #}
              {% if dynamic_page_hubdb_row.summary_results %}
                <div class="case-study__summary-results">
                  {% if dynamic_page_hubdb_row.summary_results_label %}
                    <h3 class="case-study__summary-results-label h6">
                      {{dynamic_page_hubdb_row.summary_results_label}}
                    </h3>
                  {% endif %}
                  {{dynamic_page_hubdb_row.summary_results}}
                </div>
              {% endif %}

              {# Key Products #}
              {% if dynamic_page_hubdb_row.summary_key_products %}
                <div class="case-study__summary-key-products">
                  {% if dynamic_page_hubdb_row.summary_key_products_label %}
                    <h3 class="case-study__summary-key-products-label h6">
                      {{dynamic_page_hubdb_row.summary_key_products_label}}
                    </h3>
                  {% endif %}

                  {% for product in dynamic_page_hubdb_row.summary_key_products %}
                    <span class="case-study__summary-key-product">{{ product.label }}</span>{% if not loop.last %}, {% endif %}
                  {% endfor %}
                </div>
              {% endif %}

              {# Company website #}
              {% if dynamic_page_hubdb_row.summary_company_website %}
                <div class="case-study__summary-company-website">
                  <h3 class="case-study__summary-company-website-label h6">{{ website }}</h3>
                  <a href="{{dynamic_page_hubdb_row.summary_company_website}}" target="_blank" rel="noopener">
                    {{dynamic_page_hubdb_row.summary_company_website}}
                  </a>
                </div>
              {% endif %}
            </div>

          </div>

          {% if dynamic_page_hubdb_row.success_metrics %}
            <div class="case-study__success-metrics">
              <div class="case-study__success-metrics-container">
                {% for metric in dynamic_page_hubdb_row.success_metrics %}
                  <div class="case-study__success-metric-item">
                    <div class="case-study__success-metric-value">{{ metric.value }}</div>
                    <div class="case-study__success-metric-name">{{ metric.name }}</div>
                  </div>
                {% endfor %}
              </div>
            </div>
          {% endif %}

          {# Testimonial - includes author image, name, role and quote #}
          {% if dynamic_page_hubdb_row.testimonial_quote %}
            <div class="case-study__testimonial-wrp">
              <blockquote class="case-study__testimonial-quote">
                {{dynamic_page_hubdb_row.testimonial_quote}}
              </blockquote>

              <div class="case-study__testimonial-author">

                {% if dynamic_page_hubdb_row.testimonial_author_image %}
                  <div class="case-study__testimonial-author-image-wrp">
                    <img class="case-study__testimonial-author-image"
                      src="{{dynamic_page_hubdb_row.testimonial_author_image.url}}"
                      alt="{{dynamic_page_hubdb_row.testimonial_author_image.altText}}"
                      width="{{dynamic_page_hubdb_row.testimonial_author_image.width}}"
                      height="{{dynamic_page_hubdb_row.testimonial_author_image.height}}"
                      srcset="{{ resize_image_url(dynamic_page_hubdb_row.testimonial_author_image.url, 0, 0, 1024) }}">
                  </div>
                {% endif %}

                <div class="case-study__testimonial-author-info">
                  {% if dynamic_page_hubdb_row.testimonial_author_name %}
                    <div class="case-study__testimonial-author-name">
                      {{dynamic_page_hubdb_row.testimonial_author_name}}
                    </div>
                  {% endif %}

                  {% if dynamic_page_hubdb_row.testimonial_author_role %}
                    <div class="case-study__testimonial-author-role">
                      {{dynamic_page_hubdb_row.testimonial_author_role}}
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endif %}

          {# Company summary - includes image, name and summary #}
          {% if dynamic_page_hubdb_row.company_summary %}
            <div class="case-study__company-summary-wrp">
              {% if dynamic_page_hubdb_row.company_image %}
                <div class="case-study__company-image-wrp">
                  <img class="case-study__company-image"
                    src="{{dynamic_page_hubdb_row.company_image.url}}"
                    alt="{{dynamic_page_hubdb_row.company_image.altText}}"
                    width="{{dynamic_page_hubdb_row.company_image.width}}"
                    height="{{dynamic_page_hubdb_row.company_image.height}}"
                    srcset="{{ resize_image_url(dynamic_page_hubdb_row.company_image.url, 0, 0, 1024) }}"
                  >
                </div>
              {% endif %}

              <div class="case-study__company-info">
                {% if dynamic_page_hubdb_row.company_name %}
                  <h2 class="case-study__company-name">
                    {{dynamic_page_hubdb_row.company_name}}
                  </h2>
                {% endif %}

                <div class="case-study__company-summary">
                  {{dynamic_page_hubdb_row.company_summary}}
                </div>
              </div>
            </div>
          {% endif %}

          {% if dynamic_page_hubdb_row.case_study_body %}
            <div class="case-study__body">
              {{dynamic_page_hubdb_row.case_study_body}}
            </div>
          {% endif %}
        </article>

        <div class="case-study__related-case-studies-wrp">
          <div class="case-study__related-case-studies">
            <h2 class="case-study__related-case-studies-title">{{ related_case_studies }}</h2>
            <div class="case-study__related-case-studies-container">

              {% module 'related-case-studies'
                path="../modules/case-study-list",
                offset=0,
                width=12,
                content={
                  "mode" : "related"
                }
              %}
            </div>
          </div>
        </div>

      </div>
    </div>

  {% elif dynamic_page_hubdb_table_id %}
    {% dnd_area 'dnd_area'
      label='Case study template',
      class='case-study-template'
    %}
      {% dnd_section %}
        {% dnd_column
          offset=0,
          width=12
        %}
          {% dnd_row %}
            {% dnd_module
              path="../modules/case-study-list",
              offset=0,
              width=12,
            %}
            {% end_dnd_module %}
          {% end_dnd_row %}
        {% end_dnd_column %}
      {% end_dnd_section %}
    {% end_dnd_area %}
  {% endif %}
{% endblock body %}
